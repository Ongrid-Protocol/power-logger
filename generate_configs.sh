#!/bin/bash

# Base port number
BASE_PORT=33335

# List of device IDs
DEVICE_IDS=(
    "SG1001KE01" "SC1002KE02" "SGC1003KE03" "SC1052US03" "SG1004KE04" 
    "SG1005NG01" "SC1006NG02" "SGC1007NG03" "SG1008ZA01" "SC1009ZA02"
    "SGC1010ZA03" "SG1011EG01" "SC1012EG02" "SGC1013MA01" "SG1014GH01"
    "SC1015ET01" "SGC1016US01" "SG1017US02" "SC1018US03" "SGC1019US04"
    "SG1020CA01" "SC1021CA02" "SGC1022CA03" "SG1023MX01" "SC1024MX02"
    "SGC1025MX03" "SG1026BR01" "SC1027BR02" "SGC1028BR03" "SG1029AR01"
    "SC1030AR02" "SGC1031CL01" "SG1032CO01" "SC1033PE01" "SGC1034EC01"
    "SG1035VE01" "SC1036GB01" "SGC1037GB02" "SG1038DE01" "SC1039DE02"
    "SGC1040FR01" "SG1041IT01" "SC1042ES01" "SGC1043PL01" "SG1044NL01"
    "SC1045JP01" "SGC1046JP02" "SG1047CN01" "SC1048CN02" "SGC1049CN03"
    "SG1050KR01" "SC1051KR02" "SGC1052IN01" "SG1053IN02" "SC1054IN03"
    "SGC1055SG01" "SG1056MY01" "SC1057TH01" "SGC1058AE01" "SG1059SA01"
    "SC1060IL01" "SGC1061AU01" "SG1062AU02" "SC1063AU03" "SGC1064AU04"
    "SG1065NZ01" "SC1066NZ02" "SGC1067FJ01" "SG1068PG01" "SC1069NC01"
    "SGC1070SB01" "SG1071TZ01" "SC1072UG01" "SGC1073RW01" "SG1074SN01"
    "SC1075CI01" "SGC1076US05" "SG1077US06" "SC1078US07" "SGC1079CA04"
    "SG1080CA05" "SC1081SE01" "SGC1082NO01" "SG1083FI01" "SC1084DK01"
    "SGC1085CH01" "SG1086ID01" "SC1087PH01" "SGC1088VN01" "SG1089BD01"
    "SC1090PK01" "SGC1091UY01" "SG1092PY01" "SC1093BO01" "SGC1094NZ03"
    "SG1095FJ02" "SC1096CM01" "SGC1097CD01" "SG1098MZ01" "SC1099DZ01"
    "SGC1100TN01"
)

# Create identities directory if it doesn't exist
mkdir -p identities

# Generate config for each node
for i in {1..100}; do
    PORT=$((BASE_PORT + i - 1))
    DEVICE_ID="${DEVICE_IDS[$((i-1))]}"
    
    cat > "identities/node${i}_config.yaml" << EOL
node:
  name: "node${i}"
  port: ${PORT}
  device_id: "${DEVICE_ID}"
  ic:
    network: "local"
    canister_id: "bkyz2-fmaaa-aaaaa-qaaaq-cai"
    is_local: true
    url: "http://127.0.0.1:4943"
  peer_nodes: []
EOL

    echo "Generated config for node${i} with port ${PORT} and device ID ${DEVICE_ID}"
done

echo "Configuration files generated successfully"